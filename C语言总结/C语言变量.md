## C语言变量

### 什么是变量

**变量**：用来标识一块内存区域，即变量就是一块内存区域，而这个区域的值可以更改，故叫做“变量”

**变量名**：是一个标识符，变量的名字，即一块内存区域的名字。变量名并不占用内存空间，使用变量名让我们操作内存以区域、块为单位，更加方便。

除了变量名不是内存地址，其他所有名都是地址吗？

所谓的其他名无非是函数名、标识符常量名、指针名、数组名、结构名、类名等等。
比如指针名、数组名、函数名就是地址，它们分别表示指针所指向元素的地址、数组的首地址和函数的入口地址。
变量名虽然不直接表示地址，但可用取地址符号&来获得它所代表的变量的存放地址。因为在定义变量的同时会分配给它相应的空间
而指针变量呢，它本身也是一个变量名，只不过它标识的那块内存存放的是一个地址值

### 变量内容

对变量定义就是告诉编译器在何处创建变量的存储，以及如何创建变量的存储。

按照变量的用途对变量进行分类：

变量的作用

- **局部变量**

- **全局变量**

变量储存方式 

- **静态存储方式**

  静态储存方式是指在程序运行期间有由系统分配固定的储存空间方式

- **动态存储方式**

  动态存储方式是指在程序运行期间根据需要进行动态的分配存储空间的方式

### 如何定义

每个变量和函数都会有两个属性：

- **数据类型**（浮点型整形之类）

- **数据存储类别**（静态存储和动态存储）

  - **自动的**（auto）

    函数中的局部变量    ：一般不专门声明静态 存储类别，都是动态的分配存储空间的，数据存储在动态存储区中
    一般函数中的形参和在函数中定义的局部变量都属于自动变量
    **简单来说就是在函数调用结束后，不保留该局部变量的值，其存储空间释放，下次调用该函数时自动创建一个全新的变量。**

    ```c
    int a,b=3;     
    ```

     等价于     

    ```c
    auto int a,b=3;
    ```

    

  - **静态的**（static）

    静态局部变量
    **简单来说在函数调用结束时，保留该局部变量变量的值，其存储空间不释放，下次调用该函数时该变量还是上次的值**

    > ```c
    > #include<stdio.h>
    > int main()
    > {
    > int abc(int a);
    > int b=2,c;
    > for(c=1;c<4;c++)
    > {
    > printf("%d\n",abc(b));
    > }
    > getchar();
    > getchar();
    > return 0;
    > }
    > int abc(int a)
    > {
    > auto int d=0;
    > static e=3;
    > d=d+1;
    > e=e+1;
    > return (a+d+e);
    > }
    > ```
    >
    > 每次调用d，d为1调用结束d为0；每次调用e，e=e+1.而不是3

  - **寄存器的**（register）

    在程序中当某些变量需要频繁使用时，为存取变量减少时间，提高效率，将局部变量的值放在CPU的寄存器中，不在从内存中存取。这种变量叫做寄存器变量。
  
    ```c
    register int f
    ```
  
     //定义f为寄存器变量
  
  - **外部的**（extern）
    函数分为内部函数和外部函数
    内部函数只能被本文件中其他函数所调用；而外部函数可供其他文件调用
    
    全局变量是存放在静态存储区。他们的生存期时固定的。
    一般来说外部变量是在函数外部定义的全局变量。
    
    ```c
    //1 在一个文件内扩展外部变量的作用域。
    #include<stdio.h>
    int main()
    {
    extern int a,b,c;
    }
    int a,b,c;
    int abc(int i)
    {
    …
    }
    //2将外部变量的作用域扩展到其他文件
    //文件1
    #include<stdio.h>
    int A;
    int main()
    {
    …
    }
    //文件2
    extern A;
    int abc（int a,int b）
    {
    int c;
    c=a+b;
    return ©;
    }
    //3将外部变量的作用域限制在本文件中
    文件1
    static int a;
    int main()
    {
    …
    }
    //文件2
    extern a;
    int abc(int i)
    {
    …
    }    
    ```
    
    像这样在全局变量用static声明，该变量就不能被使用于其他文件，也就是该全局变量的作用域是本文件





### 二、变量的生存期

C语言的变量生存期有2种：

- 全程生存期

  指变量在程序运行一开始就被建立，而在程序运行结束后才从内存中删除。

  具有全程生存期的变量是全局变量和静态变量 

  具有全程生存期的变量存储在程序的静态数据存储区中

- 动态生存期

  指变量在程序运行过程中，因需要使用才建立，而使用结束就被删除

  具有动态生存期的变量有：局部自动变量，寄存器变量

  具有动态生存期的变量存储在程序的动态数据区中

  对于复合语句种定义的auto型的局部变量，每当程序运行至该语句时，就会在动态数据区建立这些局部变量的存储空间，而一旦程序流程离开该复合语句时，该复合语句种的局部变量将被系统从内存种删除

###  三、 变量的初始化

|            | 全局生存期变量                                  | 动态生存区变量                             |
| ---------- | ----------------------------------------------- | ------------------------------------------ |
| 初始化值   | 如果没有初始化，默认初始化为0值（也可以是null） | 如果没有复制，默认为----随机数！           |
| 初始化时机 | 在程序刚开始运行建立静态数据区执行一次，就一次  | 定义时有初始化，之后每次创建，都会初始化值 |

### 四、变量初始化和变量声明的关系

#### 什么是变量声明

变量声明的形式是，(类型说明符)（类型名）

变量定义：用于为变量分配存储空间，还可为变量指定初始值。程序中，变量有且仅有一个定义。

变量声明：用于向程序表明变量的类型和名字。

#### 为什么说定义一定是声明，声明不一定是变量

- 定义也是声明，extern声明不是定义

- 定义也是声明：当定义变量时我们声明了它的类型和名字。
  extern声明不是定义：通过使用extern关键字声明变量名而不定义它。
- 变量只能定义一次，却可以声明多次。
- 定义分配存储空间，声明不会。

#### 变量使用前就要被定义或者声明

这样做的意义：大概意思就是**向编译器表明应该如何处理所声明的变量**。复制多少，变量的内存区域多大，取值范围多少。

具体含义如下：

1.  建立变量符号表

   通过声明变量，编译器可以建立变量符号表，如此一来，程序中用到了多少变量，每个变量的类型是什么，编译器非常清楚，是否使用了没有声明的变量，编译器在编译期间就可以发现。从而帮助了程序员远离由于疏忽而将变量名写错的情况。

2. 变量的数据类型指示系统分配多少内存空间。

3. 变量的数据类型指示了系统如何解释存储空间中的值。

   同样的数值，不同的类型将有不同的解释。int占据4个字节，float也占据4个字节，在内存中同样也是存储的二进制数，并且这个二进制数也没有标志区分当前是int型还是float型。如何区分？就是通过变量的数据类型来区分。由于声明建立了变量符号表，所以系统知道变量该如何解释。

4. 变量的数据类型确定了该变量的取值范围

   例如短整型数据取值-32767～32767之间。\

5. 不同的数据类型有不同的操作

   如整数可以求余。C语言用符号”%”表示求余。整数可以，实数不可以。

###  五、常变量：

​        C99允许使用常变量：

```c
            const  int  a=3;

            特点：		1）常变量具有变量的属性，有类型，占存储单元，只是不允许修改值

                      2）常变量就是有名字的不变量，名字便于在程序中被应用
```