# 技术
## 验证码
## 会话管理

# 项目

## 设计思路(怎么实现的)

用户登录成功后，要保存用户状态，就添加了登录凭证数据库表，登录时，对比登录凭证，如何登录成功，保存用户状态在ThreadLocal中，比如(购物车之类的)，以便后面的连接中使用。
因为要记录浏览器访问状态，所以选择使用cookies保存服务器发给的ticket随机字符串，在之后每次访问制定的目录时，都携带该cookie，从而实现有状态的访问

## 功能
- 验证码，异步请求方式
- 登录验证
- 生成登录凭证，发送给客户端

三次请求

## 实体类
创建LoginTicket实体类，与数据库字段对应


## 跳转登录页面     /login   Get
### 
简单的处理请求页面转发

## 登录页面登录     /login Post 参数需要携带用户名、密码、验证码、记住我、session，response、kaptchaOwner
验证账号  密码  验证码
成功后   生成  登录凭证，发送给客户端

### C
- 接受参数
- 验证验证码正确性
- 调用Service层的登陆方法，接受返回的消息(map)
- 根据成功或者失败渲染到不同界面
    - 失败到登录
    - 成功到首页

### S
- 验证
    - 验证用户、密码、验证码是否为未输入
    - 验证用户是否存在
    - 判断账号是否激活
    - 验证密码是否是与数据库一致
- 登录
    - 成功后生成并返回登录凭证(创建LoginTicket对象，返回ticket)(因为记住密码，所以要设置过期时间)
- 返回Controller层消息
    - 将上述的成功或者失败的消息封装到map中返回

### D
创建LoginTicket对应的crud 
- 更新ticket是否过期方法
- 增加ticket方法
- 根据ticket查询整个ticket记录方法。


## 验证码生成       /kaptcha Get   异步请求方式




